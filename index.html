<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VIP All-in-One Video Downloader</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#050505; --accent:#ff2d75; --accent-2:#ff0050; --gold:#ffd700;
      --muted:#bfa3b8;
    }
    body{margin:0;min-height:100vh;font-family:'Poppins',system-ui,Arial;background:linear-gradient(160deg,#000 0%,#0d0d0d 100%);color:#ffe0f0;overflow:auto}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:36px}
    .card{width:460px;max-width:94%;background:linear-gradient(180deg,rgba(15,8,12,0.6),rgba(8,4,6,0.75));border-radius:16px;padding:22px;box-shadow:0 18px 50px rgba(255,45,117,0.08);border:1px solid rgba(255,45,117,0.06)}
    .top{display:flex;align-items:center;gap:12px}
    .avatar{width:64px;height:64px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,45,117,0.2)}
    .avatar img{width:100%;height:100%;object-fit:cover}
    h1{margin:0;font-size:18px;color:var(--accent);text-shadow:0 0 8px rgba(255,45,117,0.12)}
    .subtitle{color:var(--muted);font-size:12px;margin-top:4px}
    .tabs{display:flex;gap:8px;margin:16px 0;flex-wrap:wrap}
    .tab{flex:1;padding:8px 10px;border-radius:8px;background:rgba(255,45,117,0.06);color:var(--muted);text-align:center;cursor:pointer;border:1px solid rgba(255,45,117,0.03);font-weight:600}
    .tab.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}
    .input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,45,117,0.06);background:rgba(0,0,0,0.45);color:#ffd6ea;font-size:14px;outline:none}
    .row{display:flex;gap:8px;margin-top:12px}
    .btn{flex:1;padding:11px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,45,117,0.08);color:var(--muted)}
    .video-box{margin-top:14px;display:none}
    video{width:100%;border-radius:12px;display:block;margin-bottom:10px}
    .links{display:flex;flex-direction:column;gap:8px}
    .link-btn{display:block;padding:10px;border-radius:8px;background:rgba(255,255,255,0.04);color:#ffe; text-decoration:none;border:1px solid rgba(255,45,117,0.06);font-weight:600}
    .small{font-size:12px;color:var(--muted);margin-top:10px;text-align:center}
    .footer{margin-top:12px;text-align:center;color:var(--gold);font-weight:600}
    .matrix {position:fixed;inset:0;z-index:-1;pointer-events:none}
    canvas{width:100%;height:100%}

    /* üîπ Debug box style */
    #debugBox{margin-top:14px;padding:10px;background:#111;border-radius:10px;font-size:11px;color:#0f0;max-height:200px;overflow:auto;white-space:pre-wrap}
  </style>
</head>
<body>
  <div class="matrix"><canvas id="matrixCanvas"></canvas></div>

  <div class="wrap">
    <div class="card">
      <!-- top -->
      <div class="top">
        <div class="avatar"><img src="https://i.postimg.cc/Dzrr0fbd/stripped-Snapchat-931726747.jpg"></div>
        <div style="flex:1">
          <h1>VIP All-in-One Downloader</h1>
          <div class="subtitle">TikTok ‚Ä¢ Facebook ‚Ä¢ Instagram ‚Ä¢ Pinterest ‚Ä¢ YouTube</div>
        </div>
      </div>

      <!-- tabs -->
      <div class="tabs" id="tabs">
        <div class="tab active" data-site="tiktok">TikTok</div>
        <div class="tab" data-site="facebook">Facebook</div>
        <div class="tab" data-site="instagram">Instagram</div>
        <div class="tab" data-site="pinterest">Pinterest</div>
        <div class="tab" data-site="youtube">YouTube</div>
      </div>

      <!-- input -->
      <input id="urlInput" class="input" placeholder="https://..." />

      <div class="row">
        <button id="fetchBtn" class="btn">üé¨ Fetch</button>
        <button id="clearBtn" class="btn ghost">Clear</button>
      </div>

      <div id="videoBox" class="video-box">
        <video id="videoTag" controls></video>
        <div id="links" class="links"></div>
      </div>

      <!-- üîπ Debug box -->
      <div id="debugBox">Debug: Waiting...</div>

      <div class="small">‚ö° Developed by <strong>Mr Hamza Jutt</strong> ¬© <span id="year"></span></div>
      <div class="footer">VIP Matrix Edition</div>
    </div>
  </div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  let current = 'tiktok';
  document.querySelectorAll('.tab').forEach(t=>{
    t.addEventListener('click', ()=> {
      document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      current = t.dataset.site;
      document.getElementById('videoBox').style.display = 'none';
      document.getElementById('links').innerHTML = '';
      document.getElementById('videoTag').src = '';
      document.getElementById('debugBox').textContent = "Debug: Waiting...";
    });
  });

  const fetchBtn = document.getElementById('fetchBtn');
  const clearBtn = document.getElementById('clearBtn');
  const urlInput = document.getElementById('urlInput');
  const videoBox = document.getElementById('videoBox');
  const videoTag = document.getElementById('videoTag');
  const links = document.getElementById('links');
  const debugBox = document.getElementById('debugBox');

  clearBtn.addEventListener('click', ()=>{
    urlInput.value=''; videoBox.style.display='none'; links.innerHTML=''; videoTag.src='';
    debugBox.textContent="Debug: Waiting...";
  });

  fetchBtn.addEventListener('click', async ()=>{
    const url = urlInput.value.trim();
    if(!url){ alert('Please paste a video URL'); return; }

    links.innerHTML = '‚è≥ Fetching...';
    videoBox.style.display = 'none';
    debugBox.textContent = "Debug: Fetching...";
    try {
      const resp = await fetch(`/api/${current}?url=${encodeURIComponent(url)}`);
      const data = await resp.json();

      // üîπ Show API response in debug box
      debugBox.textContent = JSON.stringify(data, null, 2);

      links.innerHTML = '';
      videoTag.src = '';
    } catch (err){
      debugBox.textContent = "Error: " + err.message;
      links.innerHTML = '';
      alert('Error fetching video. See debug box.');
    }
  });
</script>
</body>
        </html>
